{"version":3,"sources":["../../server/controller/rsvp.js"],"names":["rsvpController","respondToRsvp","req","res","meetupId","params","id","userId","user","response","body","Meetup","retrieveSingleMeetup","checkForMeetup","responseInstance","Rsvp","responseToMeetup","newResponseData","getJoinedMeetups","userResponses","result","length"],"mappings":";;;;;;;AAEA;;AACA;;AACA;;;;;;;;AAKA,IAAMA,cAAc,GAAG;AACfC,EAAAA,aADe;AAAA;AAAA;AAAA,6CACDC,GADC,EACIC,GADJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAEbC,cAAAA,QAFa,GAEFF,GAAG,CAACG,MAAJ,CAAWC,EAFT;AAGbC,cAAAA,MAHa,GAGJL,GAAG,CAACM,IAAJ,CAASF,EAHL;AAKjBG,cAAAA,QALiB,GAMfP,GAAG,CAACQ,IANW,CAKjBD,QALiB;AAAA;AAAA,qBAQUE,gBAAOC,oBAAP,CAA4BR,QAA5B,CARV;;AAAA;AAQbS,cAAAA,cARa;;AAAA,kBAUdA,cAVc;AAAA;AAAA;AAAA;;AAAA,+CAWV,mCAAcV,GAAd,EAAmB,GAAnB,EAAwB,kBAAxB,CAXU;;AAAA;AAcbW,cAAAA,gBAda,GAcM,IAAIC,aAAJ,CAASb,GAAG,CAACQ,IAAb,CAdN;AAAA;AAAA,qBAeWI,gBAAgB,CAACE,gBAAjB,CAAkCZ,QAAlC,EAA4CG,MAA5C,CAfX;;AAAA;AAebU,cAAAA,eAfa;;AAAA,oBAgBfR,QAAQ,KAAK,KAhBE;AAAA;AAAA;AAAA;;AAAA,+CAiBV,qCAAgBN,GAAhB,EAAqB,GAArB,EAA0B,yCAA1B,EAAqEc,eAArE,CAjBU;;AAAA;AAAA,+CAmBZ,qCAAgBd,GAAhB,EAAqB,GAArB,EAA0B,iCAA1B,EAA6D,IAA7D,CAnBY;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAsBfe,EAAAA,gBAtBe;AAAA;AAAA;AAAA,8CAsBEhB,GAtBF,EAsBOC,GAtBP;AAAA;AAAA;AAAA;AAAA;AAAA;AAwBjBG,cAAAA,EAxBiB,GAyBfJ,GAAG,CAACM,IAzBW,CAwBjBF,EAxBiB;AA0BbG,cAAAA,QA1Ba,GA0BF,KA1BE;AAAA;AAAA,qBA2BEM,cAAKI,aAAL,CAAmBb,EAAnB,EAAuBG,QAAvB,CA3BF;;AAAA;AA2BbW,cAAAA,MA3Ba;;AAAA,oBA4BfA,MAAM,CAACC,MAAP,KAAkB,CA5BH;AAAA;AAAA;AAAA;;AAAA,gDA4Ba,mCAAclB,GAAd,EAAmB,GAAnB,EAAwB,sCAAxB,CA5Bb;;AAAA;AAAA,gDA6BZ,qCAAgBA,GAAhB,EAAqB,GAArB,EAA0B,uBAA1B,EAAmDiB,MAAnD,CA7BY;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA,CAAvB;eAiCepB,c","sourcesContent":["/* eslint-disable radix */\n/* eslint-disable eol-last */\nimport Meetup from '../models/meetup';\nimport Rsvp from '../models/rsvp';\nimport {\n  errorResponse,\n  successResponse,\n} from '../utilities/responseformat';\n\nconst rsvpController = {\n  async respondToRsvp(req, res) {\n    const meetupId = req.params.id;\n    const userId = req.user.id;\n    const {\n      response,\n    } = req.body;\n\n    const checkForMeetup = await Meetup.retrieveSingleMeetup(meetupId);\n\n    if (!checkForMeetup) {\n      return errorResponse(res, 404, 'Meetup not found');\n    }\n\n    const responseInstance = new Rsvp(req.body);\n    const newResponseData = await responseInstance.responseToMeetup(meetupId, userId);\n    if (response === 'yes') {\n      return successResponse(res, 200, 'You are scheduled to attend this meetup', newResponseData);\n    }\n    return successResponse(res, 200, 'Your response has been recorded', null);\n  },\n\n  async getJoinedMeetups(req, res) {\n    const {\n      id,\n    } = req.user;\n    const response = 'yes';\n    const result = await Rsvp.userResponses(id, response);\n    if (result.length === 0) return errorResponse(res, 404, 'You have not joined any meetups yet.');\n    return successResponse(res, 200, 'Joined meetups found.', result);\n  },\n};\n\nexport default rsvpController;"],"file":"rsvp.js"}